<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Query Generator</title>
    <script src="/resources/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            margin: 20px 0;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        input {
            padding: 5px;
            font-size: 14px;
            width: 300px;
        }
        button {
            padding: 8px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .output {
            margin-top: 20px;
            padding: 10px;
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>SQL Query Generator</h1>

    <!-- Page 1: Single SQL Query -->
    <div class="container">
        <h3>Generate Single SQL Query</h3>
        <label for="table-name-single">Enter Table Name:</label>
        <input type="text" id="table-name-single" placeholder="Enter table name">
        <button id="generate-sql-single">Generate SQL</button>
        <div class="output" id="sql-output-single"></div>
    </div>

    <!-- Page 2: Multiple SQL Queries -->
    <div class="container">
        <h3>Generate Multiple SQL Queries</h3>
        <label for="table-name-multiple">Enter Table Name:</label>
        <input type="text" id="table-name-multiple" placeholder="Enter table name">
        <label for="num-queries">Enter Number of Queries:</label>
        <input type="number" id="num-queries" placeholder="Enter number of queries" min="1" max="10">
        <button id="generate-sql-multiple">Generate SQLs</button>
        <div class="output" id="sql-output-multiple"></div>
    </div>

	<!-- Page 3: Generate Multiple Insights for SQL Query -->
    <div class="container">
        <h3>Generate Multiple Insights for SQL Query</h3>
        <label for="sql">Enter SQL Query:</label>
        <textarea rows="4" cols="50" id="sql" placeholder="Enter SQL query"></textarea>
        <label for="num-insights">Enter Number of Insights:</label>
        <input type="number" id="num-insights" placeholder="Enter number of insights" min="1" max="10">
        <button id="generate-sql-insights-multiple">Generate Insights</button>
        <div class="output" id="sql-insights-multiple"></div>
    </div>
	
    <script>
        // Page 1: Generate Single SQL Query
        $('#generate-sql-single').click(function() {
            var tableName = $('#table-name-single').val();
            if (tableName) {
                $.ajax({
                    url: '/generateSQL', // Servlet endpoint for single query
                    type: 'GET',
                    data: { task: 'generateSQL', table: tableName },
                    success: function(response) {
                        $('#sql-output-single').html(response);
                    },
                    error: function() {
                        $('#sql-output-single').html('Error generating SQL query.');
                    }
                });
            } else {
                alert("Please enter a table name.");
            }
        });

        // Page 2: Generate Multiple SQL Queries
        $('#generate-sql-multiple').click(function() {
            var tableName = $('#table-name-multiple').val();
            var numQueries = $('#num-queries').val();
            if (tableName && numQueries) {
                $.ajax({
                    url: '/generateMultipleSQL', // Servlet endpoint for multiple queries
                    type: 'GET',
                    data: {task: 'generateMultipleSQL', table: tableName, numQueries: numQueries },
                    success: function(response) {
                        $('#sql-output-multiple').html(response);
                    },
                    error: function() {
                        $('#sql-output-multiple').html('Error generating SQL queries.');
                    }
                });
            } else {
                alert("Please enter both table name and number of queries.");
            }
        });
     // Page 3: Generate n insights from SQL Query
        $('#generate-sql-insights-multiple').click(function() {
            var sql = $('#sql').val();
            var numInsights = $('#num-insights').val();
            if (sql && numInsights) {
                $.ajax({
                    url: '/generateInsightsSQL', // Servlet endpoint for multiple queries
                    type: 'GET',
                    data: { task: 'generateInsightsSQL', sql: sql, numInsights: numInsights },
                    success: function(response) {
                        $('#sql-insights-multiple').html(response);
                    },
                    error: function() {
                        $('#sql-insights-multiple').html('Error generating Insights from SQL queries.');
                    }
                });
            } else {
                alert("Please enter both sql and number of insights to generate.");
            }
        });
    </script>
</body>
</html>
